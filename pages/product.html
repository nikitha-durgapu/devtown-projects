<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;

        input:-webkit-autofill:active{-webkit-box-shadow: none;}
      }
    </style>
  </head>

  <body
    class="min-h-screen bg-gradient-to-tl from-[#5594b3] via-[#6a9eb9] via-[#7fa9be] to-[#92b3c4] font-serif"
  >
    <div class="flex flex-col justify-center space-y-10">
      <div>
        <button
          class="transform rounded-sm bg-indigo-50 py-2 font-semi-bold duration-300 hover:bg-indigo-200 text-[#7CA7BD] hover:text-zinc-50 absolute right-3.5 top-4 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-sm px-4"
          onclick="logout()"
        >
          Logout
        </button>
      </div>
      <div class="flex flex-col items-center justify-center">
        <div id="uname">
          <!-- <h1 >Hi ${username}</h1> -->
        </div>
        <div class="text-center text-2xl font-medium text-gray-50 mt-12">
          <p>Welecome to your product page</p>
        </div>
      </div>
      <div class="flex flex-col items-center justify-center w-full">
        <div
          class="text-center text-xl font-medium text-gray-50 border-b-2 border-dotted mb-6 yourProducts"
        >
          <h3>Your Products are</h3>
        </div>
        <div class="w-3/4 shadow-2xl bg-gray-50 rounded-t-lg productHeader">
          <div
            class="grid grid-cols-[40px_1fr_2fr_40px_40px] gap-x-2 gap-y-2 p-1"
          >
            <div
              class="col-start-2 bg-indigo-100 flex justify-center items-center py-2 rounded-lg"
            >
              <h3 class="text-slate-800">Name of the Product</h3>
            </div>
            <div
              class="col-span-3 bg-indigo-100 flex justify-center items-center py-2 rounded-lg"
            >
              <h3 class="text-slate-800">Product Description</h3>
            </div>
          </div>
        </div>
        <div id="products" class="w-3/4"></div>
      </div>

      <div class="flex flex-col items-center justify-center py-3 px-2">
        <div
          class="grid grid-cols-[40px_1fr_2fr_40px_40px] gap-x-2 gap-y-2 w-3/4"
        >
          <div
            class="productEdit col-start-1 col-end-5 relative self-center px-8 py-4 hidden m-1"
          >
            <div
              class="flex flex-col justify-center items-center shadow-2xl bg-gray-50 rounded-lg py-2"
            >
              <div class="flex flex-row justify-between items-center w-3/4">
                <h1
                  class="text-[#7CA7BD] text-md border-b-2 border-dotted border-[#7CA7BD]"
                >
                  Edit Product Details
                </h1>
                <div class="cursor-pointer" onclick="closeEdit()">
                  <svg
                    viewBox="-0.5 0 25 25"
                    class="w-5 h-5"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M3 21.32L21 3.32001"
                        stroke="#7ca7bd"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                      <path
                        d="M3 3.32001L21 21.32"
                        stroke="#7ca7bd"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      ></path>
                    </g>
                  </svg>
                </div>
              </div>
              <div class="relative my-2 w-4/5">
                <div
                  class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
                >
                  <svg
                    fill="#7CA7BD"
                    viewBox="0 0 1920 1920"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M277.974 49.076c65.267-65.379 171.733-65.49 237.448 0l232.186 232.187 1055.697 1055.809L1919.958 1920l-582.928-116.653-950.128-950.015 79.15-79.15 801.792 801.68 307.977-307.976-907.362-907.474L281.22 747.65 49.034 515.464c-65.379-65.603-65.379-172.069 0-237.448Zm1376.996 1297.96-307.977 307.976 45.117 45.116 384.999 77.023-77.023-385-45.116-45.116ZM675.355 596.258l692.304 692.304-79.149 79.15-692.304-692.305 79.149-79.15ZM396.642 111.88c-14.33 0-28.547 5.374-39.519 16.345l-228.94 228.94c-21.718 21.718-21.718 57.318 0 79.149l153.038 153.037 308.089-308.09-153.037-153.036c-10.972-10.971-25.301-16.345-39.63-16.345Z"
                        fill-rule="evenodd"
                      ></path>
                    </g>
                  </svg>
                </div>
                <input
                  type="search"
                  class="edit-product-name block p-4 pl-10 w-full text-sm text-[#7CA7BD] bg-indigo-50 rounded-lg border border-gray-300 focus:ring-[#7CA7BD] focus:border-[#7CA7BD] focus:outline-none"
                  placeholder="Edit Product Name"
                  required
                />
              </div>
              <div class="relative my-2 w-4/5">
                <div
                  class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
                >
                  <svg
                    fill="#7CA7BD"
                    viewBox="0 0 1920 1920"
                    xmlns="http://www.w3.org/2000/svg"
                    class="w-5 h-5"
                  >
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g
                      id="SVGRepo_tracerCarrier"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></g>
                    <g id="SVGRepo_iconCarrier">
                      <path
                        d="M277.974 49.076c65.267-65.379 171.733-65.49 237.448 0l232.186 232.187 1055.697 1055.809L1919.958 1920l-582.928-116.653-950.128-950.015 79.15-79.15 801.792 801.68 307.977-307.976-907.362-907.474L281.22 747.65 49.034 515.464c-65.379-65.603-65.379-172.069 0-237.448Zm1376.996 1297.96-307.977 307.976 45.117 45.116 384.999 77.023-77.023-385-45.116-45.116ZM675.355 596.258l692.304 692.304-79.149 79.15-692.304-692.305 79.149-79.15ZM396.642 111.88c-14.33 0-28.547 5.374-39.519 16.345l-228.94 228.94c-21.718 21.718-21.718 57.318 0 79.149l153.038 153.037 308.089-308.09-153.037-153.036c-10.972-10.971-25.301-16.345-39.63-16.345Z"
                        fill-rule="evenodd"
                      ></path>
                    </g>
                  </svg>
                </div>
                <input
                  type="search"
                  class="edit-product-description block p-4 pl-10 w-full text-sm text-[#7CA7BD] bg-indigo-50 rounded-lg border border-gray-300 focus:ring-[#7CA7BD] focus:border-[#7CA7BD] focus:outline-none"
                  placeholder="Edit Product Description"
                  required
                />
              </div>
              <div class="flex justify-center items-center">
                <button
                  class="edit-product text-[#7CA7BD] bg-indigo-50 hover:bg-indigo-200 hover:text-zinc-50 focus:ring-4 focus:outline-none focus:ring-gray-300 font-bold text-lg rounded-lg text-sm px-10 py-2"
                >
                  Edit
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="flex flex-col items-center justify-center m-4">
        <div class="flex flex-row w-1/2 justify-center items-center">
          <h4 class="text-xl font-medium text-gray-50">
            To Add New Product click
          </h4>
          <button
            onclick="handleAdd()"
            class="add-product-btn transform rounded-sm bg-indigo-50 py-2 font-semi-bold duration-300 hover:bg-indigo-200 text-[#7CA7BD] hover:text-gray-500 focus:ring-4 focus:outline-none focus:ring-blue-300 rounded-lg text-sm px-4 ml-4"
          >
            Add Product
          </button>
        </div>
        <div class="addProduct relative self-center w-3/4 my-2 hidden">
          <div
            class="flex flex-col justify-center items-center shadow-2xl bg-gray-50 rounded-lg py-2"
          >
            <div class="flex flex-row justify-between items-center w-3/4">
              <h1
                class="text-[#7CA7BD] text-md border-b-2 border-dotted border-[#7CA7BD]"
              >
                Add Product Details
              </h1>
              <div class="cursor-pointer" onClick="closeAdd()">
                <svg
                  viewBox="-0.5 0 25 25"
                  class="w-5 h-5"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g
                    id="SVGRepo_tracerCarrier"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="M3 21.32L21 3.32001"
                      stroke="#7ca7bd"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></path>
                    <path
                      d="M3 3.32001L21 21.32"
                      stroke="#7ca7bd"
                      stroke-width="1.5"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    ></path>
                  </g>
                </svg>
              </div>
            </div>
            <div class="relative my-2 w-4/5">
              <div
                class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
              >
                <svg
                  fill="#7CA7BD"
                  viewBox="0 0 1920 1920"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5"
                >
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g
                    id="SVGRepo_tracerCarrier"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="M277.974 49.076c65.267-65.379 171.733-65.49 237.448 0l232.186 232.187 1055.697 1055.809L1919.958 1920l-582.928-116.653-950.128-950.015 79.15-79.15 801.792 801.68 307.977-307.976-907.362-907.474L281.22 747.65 49.034 515.464c-65.379-65.603-65.379-172.069 0-237.448Zm1376.996 1297.96-307.977 307.976 45.117 45.116 384.999 77.023-77.023-385-45.116-45.116ZM675.355 596.258l692.304 692.304-79.149 79.15-692.304-692.305 79.149-79.15ZM396.642 111.88c-14.33 0-28.547 5.374-39.519 16.345l-228.94 228.94c-21.718 21.718-21.718 57.318 0 79.149l153.038 153.037 308.089-308.09-153.037-153.036c-10.972-10.971-25.301-16.345-39.63-16.345Z"
                      fill-rule="evenodd"
                    ></path>
                  </g>
                </svg>
              </div>
              <input
                type="search"
                class="add-product-name block p-4 pl-10 w-full text-sm text-[#7CA7BD] bg-indigo-50 rounded-lg border border-gray-300 focus:ring-[#7CA7BD] focus:border-[#7CA7BD] focus:outline-none"
                placeholder="Add Product Name"
                required
              />
            </div>
            <div class="relative my-2 w-4/5">
              <div
                class="flex absolute inset-y-0 left-0 items-center pl-3 pointer-events-none"
              >
                <svg
                  fill="#7CA7BD"
                  viewBox="0 0 1920 1920"
                  xmlns="http://www.w3.org/2000/svg"
                  class="w-5 h-5"
                >
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g
                    id="SVGRepo_tracerCarrier"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                  ></g>
                  <g id="SVGRepo_iconCarrier">
                    <path
                      d="M277.974 49.076c65.267-65.379 171.733-65.49 237.448 0l232.186 232.187 1055.697 1055.809L1919.958 1920l-582.928-116.653-950.128-950.015 79.15-79.15 801.792 801.68 307.977-307.976-907.362-907.474L281.22 747.65 49.034 515.464c-65.379-65.603-65.379-172.069 0-237.448Zm1376.996 1297.96-307.977 307.976 45.117 45.116 384.999 77.023-77.023-385-45.116-45.116ZM675.355 596.258l692.304 692.304-79.149 79.15-692.304-692.305 79.149-79.15ZM396.642 111.88c-14.33 0-28.547 5.374-39.519 16.345l-228.94 228.94c-21.718 21.718-21.718 57.318 0 79.149l153.038 153.037 308.089-308.09-153.037-153.036c-10.972-10.971-25.301-16.345-39.63-16.345Z"
                      fill-rule="evenodd"
                    ></path>
                  </g>
                </svg>
              </div>
              <input
                type="search"
                class="add-product-description block p-4 pl-10 w-full text-sm text-[#7CA7BD] bg-indigo-50 rounded-lg border border-gray-300 focus:ring-[#7CA7BD] focus:border-[#7CA7BD] focus:outline-none"
                placeholder="Add Product Description"
                required
              />
            </div>
            <div class="flex justify-center items-center">
              <button
                class="add-product text-[#7CA7BD] bg-indigo-50 hover:bg-indigo-200 hover:text-zinc-50 focus:ring-4 focus:outline-none focus:ring-gray-300 font-bold text-lg rounded-lg text-sm px-10 py-2"
              >
                Add
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const token = localStorage.getItem("token");
      if (!token) {
        window.location.href = "/login";
      }

      const productAdd = document.querySelector(".addProduct");
      const addProductBtn = document.querySelector(".add-product-btn");

      const handleAdd = () => {
        if (productAdd.classList.contains("hidden")) {
          productAdd.classList.remove("hidden");
          addProductBtn.classList.add("hidden");
        } else {
          productAdd.classList.add("hidden");
        }
      };
      const closeAdd = () => {
        console.log("clicked");
        if (productAdd.classList.contains("hidden")) {
          productAdd.classList.remove("hidden");
        } else {
          productAdd.classList.add("hidden");
          addProductBtn.classList.remove("hidden");
        }
      };
      const logout = () => {
        localStorage.removeItem("token");
        window.location.href = "/login";
      };
      const loadProducts = async () => {
        try {
          const response = await axios.get("/api/product", {
            headers: {
              authorization: `${token}`,
            },
          });
          
          const { data } = response.data;
          renderList(data);
        } catch (error) {
          if (error.response.status === 401) {
            console.log("Unauthorized");
            window.location.href = "/login";
            localStorage.removeItem("token");
          }
        }
      };
      loadProducts();

      const loadname = async () => {
        try {
          const response = await axios.get("/api/auth/signup", {});
          const { data } = response.data;
          console.log(data);
        } catch (error) {
          if (error.response.status === 401) {
            console.log("Unauthorized");
            window.location.href = "/login";
            localStorage.removeItem("token");
          }
        }
      };
      loadname();
      const addProdoctBtn = document.querySelector("button.add-product");
      const addInputName = document.querySelector("input.add-product-name");
      const addInputDescription = document.querySelector(
        "input.add-product-description"
      );

      const list = document.querySelector("#products");

      const userName = ({ userName }) => {
        `
        <div id="uname">
          <h1 >Hi ${userName}</h1>
        </div>`;
      };
      const generateProduct = ({ id, name, description, completed }) =>
        completed
          ? `<div id=" products"
          class="grid grid-cols-[40px_1fr_2fr_40px_40px] gap-x-2 gap-y-2 bg-gray-50 rounded-t-lg p-1"
        >
        
          
          <div onClick="markAsComplete('${id}')">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-slate-500"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M4.5 12.75l6 6 9-13.5"
              />
            </svg>
          </div>
          <div
            class="flex flex-row justify-between bg-indigo-100 px-2 py-1 rounded-lg"
          >
            <div>
              <h3 class="text-slate-500 ">${name}</h3>
            </div>
          </div>
          <div
            class="flex flex-row justify-between bg-indigo-100 px-2 py-1 rounded-lg"
          >
            <div>
              <h3 class="text-slate-500">${description}</h3>
            </div>
          </div>

          <div
            onClick="handleEdit('${id}')"
            class="bg-gray-100 flex justify-center items-center rounded-lg hover:bg-gray-300"
          >
            <svg
              fill="#64748b"
              viewBox="-4 0 32 32"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6 text-slate-500 hover:text-slate-700 hover:cursor-pointer"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <title>edit</title>
                <path
                  d="M17.438 22.469v-4.031l2.5-2.5v7.344c0 1.469-1.219 2.688-2.656 2.688h-14.625c-1.469 0-2.656-1.219-2.656-2.688v-14.594c0-1.469 1.188-2.688 2.656-2.688h14.844v0.031l-2.5 2.469h-11.5c-0.531 0-1 0.469-1 1.031v12.938c0 0.563 0.469 1 1 1h12.938c0.531 0 1-0.438 1-1zM19.813 7.219l2.656 2.656 1.219-1.219-2.656-2.656zM10.469 16.594l2.625 2.656 8.469-8.469-2.625-2.656zM8.594 21.094l3.625-0.969-2.656-2.656z"
                ></path>
              </g>
            </svg>
          </div>
          <div
            onClick="handleDelete('${id}')"
            class="bg-gray-100 flex justify-center items-center rounded-lg hover:bg-gray-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-4 h-4 text-slate-500 hover:text-slate-800 hover:cursor-pointer"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
              />
            </svg>
          </div>
        </div>`
          : `<div id=" products"
          class="grid grid-cols-[40px_1fr_2fr_40px_40px] gap-x-2 gap-y-2 bg-gray-50  p-1"
        >
        
          
          <div class= "bg-indigo-100 flex justify-center items-center rounded-lg hover:bg-gray-300" onClick="markAsComplete('${id}')">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-6 h-6 text-slate-600"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M4.5 12.75l6 6 9-13.5"
              />
            </svg>
          </div>
          <div
            class="flex flex-row justify-between bg-indigo-100 px-2 py-1 rounded-lg"
          >
            <div>
              <h3 class="text-slate-600">${name}</h3>
            </div>
          </div>
          <div
            class="flex flex-row justify-between bg-indigo-100 px-2 py-1 rounded-lg"
          >
            <div>
              <h3 class="text-slate-600">${description}</h3>
            </div>
          </div>

          <div
            onClick="handleEdit('${id}')"
            class="bg-indigo-100 flex justify-center items-center rounded-lg hover:bg-gray-300"
          >
            <svg
              fill="#475569"
              viewBox="-4 0 32 32"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              class="w-6 h-6 text-slate-600 hover:text-slate-700 hover:cursor-pointer"
            >
              <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
              <g
                id="SVGRepo_tracerCarrier"
                stroke-linecap="round"
                stroke-linejoin="round"
              ></g>
              <g id="SVGRepo_iconCarrier">
                <title>edit</title>
                <path
                  d="M17.438 22.469v-4.031l2.5-2.5v7.344c0 1.469-1.219 2.688-2.656 2.688h-14.625c-1.469 0-2.656-1.219-2.656-2.688v-14.594c0-1.469 1.188-2.688 2.656-2.688h14.844v0.031l-2.5 2.469h-11.5c-0.531 0-1 0.469-1 1.031v12.938c0 0.563 0.469 1 1 1h12.938c0.531 0 1-0.438 1-1zM19.813 7.219l2.656 2.656 1.219-1.219-2.656-2.656zM10.469 16.594l2.625 2.656 8.469-8.469-2.625-2.656zM8.594 21.094l3.625-0.969-2.656-2.656z"
                ></path>
              </g>
            </svg>
          </div>
          <div
            onClick="handleDelete('${id}')"
            class="bg-indigo-100 flex justify-center items-center rounded-lg hover:bg-gray-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="w-4 h-4 text-slate-600 hover:text-slate-800 hover:cursor-pointer"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"
              />
            </svg>
          </div>
        </div>`;
      const productEdit = document.querySelector(".productEdit");
      const editProdoctBtn = document.querySelector("button.edit-product");
      const editInputName = document.querySelector("input.edit-product-name");
      const editInputDescription = document.querySelector(
        "input.edit-product-description"
      );
      const productHeader = document.querySelector(".productHeader");
      const yourProducts = document.querySelector(".yourProducts");

      const classname = productEdit.classList;
      //   console.log(classname);
      const renderList = (products = []) => {
        addInputName.value = "";
        addInputDescription.value = "";
        list.innerHTML =
          products.length === 0
            ? `<div class='text-center text-2xl font-medium text-gray-50 mt-12' >You Have No Products <br> Please Add Products To Get Started</div>`
            : "";
        if (products.length === 0) {
          if (productHeader.classList.contains("hidden")) {
            productHeader.classList.remove("hidden");
          } else {
            productHeader.classList.add("hidden");
          }
          if (yourProducts.classList.contains("hidden")) {
            yourProducts.classList.remove("hidden");
          } else {
            yourProducts.classList.add("hidden");
          }
        }
        products.forEach((product) => {
          const node = document.createElement("div");
          node.innerHTML = generateProduct(product);
          list.appendChild(node);
        });
      };

      const addProduct = async () => {
        try {
          if (addInputName.value === "" || addInputDescription.value === "") {
            if (addInputName.value === "") {
              return alert("Please enter a Product Name");
            }
            if (addInputDescription.value === "") {
              return alert("Please enter a Product Description");
            }
          }
          const response = await axios.post(
            "/api/product",
            {
              name: addInputName.value,
              description: addInputDescription.value,
            },
            {
              headers: {
                authorization: token,
              },
            }
          );
          window.location.reload();
          loadProducts();
        } catch (error) {}
      };
      addProdoctBtn.addEventListener("click", () => {
        addProduct();
      });
      const handleDelete = async (id) => {
        try {
          const response = await axios.delete(`/api/product/${id}`, {
            headers: {
              authorization: token,
            },
          });
          loadProducts();
        } catch (error) {}
      };

      const handleEdit = async (id) => {
        try {
          const response = await axios.get("/api/product", {
            headers: {
              authorization: `${token}`,
            },
          });
          const { data } = response.data;
          console.log(id);
          var indexno;
          for (var i in data) {
            if (data[i].id === id) {
              indexno = i;
              console.log(indexno);
            }
          }
          if (productEdit.classList.contains("hidden")) {
            productEdit.classList.remove("hidden");
          } else {
            productEdit.classList.add("hidden");
          }
          editInputName.value = data[indexno].name;
          editInputDescription.value = data[indexno].description;
          selectedId = id;
        } catch (error) {
          console.log(error);
        }
      };

      const closeEdit = () => {
        if (productEdit.classList.contains("hidden")) {
          productEdit.classList.remove("hidden");
        } else {
          productEdit.classList.add("hidden");
        }
      };

      const editProduct = async () => {
        try {
          console.log(selectedId);
          if (editInputName.value === "" || editInputDescription.value === "") {
            if (editInputName.value === "") {
              return alert("Please enter a Product Name");
            }
            if (editInputDescription.value === "") {
              return alert("Please enter a Product Description");
            }
          }
          const response = await axios.patch(
            `/api/product/${selectedId}`,
            {
              name: editInputName.value,
              description: editInputDescription.value,
            },
            {
              headers: {
                authorization: token,
              },
            }
          );
          loadProducts();
          editInputName.value = "";
          editInputDescription.value = "";
        } catch (error) {}
      };
      editProdoctBtn.addEventListener("click", () => {
        editProduct();
      });
     
    </script>
  </body>
</html>
